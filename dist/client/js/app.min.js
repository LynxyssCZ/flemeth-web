webpackJsonp([0],{0:function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},1:function(module,exports,__webpack_require__){function renderApp(){ReactDom.render(React.createElement(Router,{routes:App.routes(),history:History(),createElement:createElement}),document.getElementById("app-container"))}function createElement(component,props){return React.createElement(component,assign({container:core},props))}var React=__webpack_require__(2),ReactDom=__webpack_require__(159),History=__webpack_require__(160),assign=__webpack_require__(178),Router=__webpack_require__(179).Router,App=__webpack_require__(211),ServerApi=__webpack_require__(380),api=new ServerApi({base:"/api/"}),core=new App.FluxCore({api:api});core.init(renderApp),window.core=core,window.api=api},160:function(module,exports,__webpack_require__){(function(process){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function createBrowserHistory(){function getCurrentLocation(historyState){historyState=historyState||window.history.state||{};var path=_DOMUtils.getWindowPath(),_historyState=historyState,key=_historyState.key,state=void 0;return key?state=_DOMStateStorage.readState(key):(state=null,key=history.createKey(),isSupported&&window.history.replaceState(_extends({},historyState,{key:key}),null,path)),history.createLocation(path,state,void 0,key)}function startPopStateListener(_ref){function popStateListener(event){void 0!==event.state&&transitionTo(getCurrentLocation(event.state))}var transitionTo=_ref.transitionTo;return _DOMUtils.addEventListener(window,"popstate",popStateListener),function(){_DOMUtils.removeEventListener(window,"popstate",popStateListener)}}function finishTransition(location){var basename=location.basename,pathname=location.pathname,search=location.search,hash=location.hash,state=location.state,action=location.action,key=location.key;if(action!==_Actions.POP){_DOMStateStorage.saveState(key,state);var path=(basename||"")+pathname+search+hash,historyState={key:key};if(action===_Actions.PUSH){if(useRefresh)return window.location.href=path,!1;window.history.pushState(historyState,null,path)}else{if(useRefresh)return window.location.replace(path),!1;window.history.replaceState(historyState,null,path)}}}function listenBefore(listener){1===++listenerCount&&(stopPopStateListener=startPopStateListener(history));var unlisten=history.listenBefore(listener);return function(){unlisten(),0===--listenerCount&&stopPopStateListener()}}function listen(listener){1===++listenerCount&&(stopPopStateListener=startPopStateListener(history));var unlisten=history.listen(listener);return function(){unlisten(),0===--listenerCount&&stopPopStateListener()}}function registerTransitionHook(hook){1===++listenerCount&&(stopPopStateListener=startPopStateListener(history)),history.registerTransitionHook(hook)}function unregisterTransitionHook(hook){history.unregisterTransitionHook(hook),0===--listenerCount&&stopPopStateListener()}var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_ExecutionEnvironment.canUseDOM?void 0:"production"!==process.env.NODE_ENV?_invariant2["default"](!1,"Browser history needs a DOM"):_invariant2["default"](!1);var forceRefresh=options.forceRefresh,isSupported=_DOMUtils.supportsHistory(),useRefresh=!isSupported||forceRefresh,history=_createDOMHistory2["default"](_extends({},options,{getCurrentLocation:getCurrentLocation,finishTransition:finishTransition,saveState:_DOMStateStorage.saveState})),listenerCount=0,stopPopStateListener=void 0;return _extends({},history,{listenBefore:listenBefore,listen:listen,registerTransitionHook:registerTransitionHook,unregisterTransitionHook:unregisterTransitionHook})}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_invariant=__webpack_require__(161),_invariant2=_interopRequireDefault(_invariant),_Actions=__webpack_require__(162),_ExecutionEnvironment=__webpack_require__(163),_DOMUtils=__webpack_require__(164),_DOMStateStorage=__webpack_require__(165),_createDOMHistory=__webpack_require__(167),_createDOMHistory2=_interopRequireDefault(_createDOMHistory);exports["default"]=createBrowserHistory,module.exports=exports["default"]}).call(exports,__webpack_require__(5))},211:function(module,exports,__webpack_require__){module.exports={routes:__webpack_require__(212),Context:__webpack_require__(346),FluxCore:__webpack_require__(347)}},212:function(module,exports,__webpack_require__){var routes=[{path:"/",component:__webpack_require__(213),indexRoute:{component:__webpack_require__(220)},childRoutes:[__webpack_require__(336)("sensors"),__webpack_require__(340)("schedules"),__webpack_require__(342)("zones")]}];module.exports=function(){return routes}},213:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),Navbar=__webpack_require__(217),Application=function(props,context){React.Component.call(this,props,context)};Application.prototype.constructor=Application,inherits(Application,React.Component),module.exports=Application,Application.displayName="Application",Application.proptypes={container:React.PropTypes.object.isRequired},Application.prototype.render=function(){return React.createElement("div",{className:"flemeth-app container"},React.createElement(Navbar,{currentPath:this.props.location.pathname}),this.props.children||"No page :-<")}},217:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),Link=__webpack_require__(179).Link,NavbarLink=__webpack_require__(218),Navbar=function(props,context){React.Component.call(this,props,context)};Navbar.prototype.constructor=Navbar,inherits(Navbar,React.Component),module.exports=Navbar,Navbar.displayName="Navbar",Navbar.proptypes={currentPath:React.PropTypes.string},Navbar.prototype.render=function(){return React.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top"},React.createElement("div",{className:"container"},React.createElement("div",{className:"navbar-header"},React.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar"},React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"})),React.createElement(Link,{to:"/",className:"navbar-brand"},"Flemeth")),React.createElement("div",{id:"navbar",className:"navbar-collapse collapse"},React.createElement("ul",{className:"nav navbar-nav"},React.createElement(NavbarLink,{currentPath:this.props.currentPath,path:"/schedules"},"Schedules"),React.createElement(NavbarLink,{currentPath:this.props.currentPath,path:"/zones"},"Zones"),React.createElement(NavbarLink,{currentPath:this.props.currentPath,path:"/sensors"},"Sensors")))))}},218:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ClassNames=__webpack_require__(219),Link=__webpack_require__(179).Link,NavbarLink=function(props,context){React.Component.call(this,props,context)};NavbarLink.prototype.constructor=NavbarLink,inherits(NavbarLink,React.Component),module.exports=NavbarLink,NavbarLink.displayName="NavbarLink",NavbarLink.proptypes={currentPath:React.PropTypes.string,className:React.PropTypes.string,path:React.PropTypes.string.isRequired,query:React.PropTypes.object},NavbarLink.prototype.render=function(){return React.createElement("li",{className:ClassNames(this.props.className,{active:this.props.currentPath===this.props.path})},React.createElement(Link,{to:this.props.path,query:this.props.query},this.props.children))}},220:function(module,exports,__webpack_require__){(function(global){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),SwitcherInfo=__webpack_require__(221),TempCheckerInfo=__webpack_require__(310),OverrideInfo=__webpack_require__(311),ZonesHistory=__webpack_require__(312),maxAge=3e5,DashboardPage=function(props,context){React.Component.call(this,props,context),this.state=this.selectState(props,context),this.update=this.update.bind(this)};DashboardPage.prototype.constructor=DashboardPage,inherits(DashboardPage,React.Component),module.exports=DashboardPage,DashboardPage.displayName="DashboardPage",DashboardPage.propTypes={container:React.PropTypes.object.isRequired},DashboardPage.prototype.selectState=function(props){return props.container.getState(["Override","Root","Switcher","TempChecker","Zones"])},DashboardPage.prototype.update=function(){this.setState(this.selectState(this.props,this.context))},DashboardPage.prototype.componentDidMount=function(){var container=this.props.container,dashboardState=this.state.Root.get("dashboard");this.subKey=container.subscribe(["Override","Root","Switcher","TempChecker","Zones"],this.update),this.isFresh(dashboardState)||container.push(container.actions.Root.loadDashboard),this.updateTask=window.setInterval(function(){container.push(container.actions.Root.loadDashboard)},3e4)},DashboardPage.prototype.componentWillUnmount=function(){this.props.container.unsubscribe(this.subKey),global.clearInterval(this.updateTask)},DashboardPage.prototype.isFresh=function(dashboardState){var dashboardTime=dashboardState.get("time");return dashboardTime||dashboardState.has("loading")?dashboardTime&&dashboardTime<Date.now()-maxAge?!1:void 0:!1},DashboardPage.prototype.render=function(){return React.createElement("div",{className:"dashboard-page"},React.createElement(ZonesHistory,{className:"col-md-12"}),React.createElement(TempCheckerInfo,{className:"col-md-4",tempChecker:this.state.TempChecker,zones:this.state.Zones}),React.createElement(OverrideInfo,{className:"col-md-4",override:this.state.Override,container:this.props.container}),React.createElement(SwitcherInfo,{className:"col-md-4",switcherState:this.state.Switcher}))}}).call(exports,function(){return this}())},221:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ClassNames=__webpack_require__(219),Moment=__webpack_require__(222),SwitcherInfo=function(props,context){React.Component.call(this,props,context)};SwitcherInfo.prototype.constructor=SwitcherInfo,inherits(SwitcherInfo,React.Component),module.exports=SwitcherInfo,SwitcherInfo.displayName="SwitcherInfo",SwitcherInfo.proptypes={switcherState:React.PropTypes.object.isRequired},SwitcherInfo.prototype.render=function(){return React.createElement("div",{className:this.props.className},React.createElement("div",{className:ClassNames("switcher-info panel panel-default")},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"Switcher")),React.createElement("div",{className:"panel-body"},this.renderContent())))},SwitcherInfo.prototype.renderContent=function(){var elements=[],state=this.props.switcherState.toJS();return elements.push(React.createElement("span",{className:"real-value",key:"realValue"},"Current value: ",React.createElement("em",{className:state.realValue?"On":"Off"},state.realValue?"On":"Off"))),state.realValue!==state.nextValue&&elements.push(React.createElement("span",{className:"next-value text-muted",key:"nextValue"},"Next value: ",state.nextValue?"On":"Off")),state.locked&&elements.push(React.createElement("span",{className:"lock-info text-warning",key:"lock"},"Locked: ",Moment(state.lockStart).fromNow())),elements}},310:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ClassNames=__webpack_require__(219),TempCheckerInfo=function(props,context){React.Component.call(this,props,context)};TempCheckerInfo.prototype.constructor=TempCheckerInfo,inherits(TempCheckerInfo,React.Component),module.exports=TempCheckerInfo,TempCheckerInfo.displayName="TempCheckerInfo",TempCheckerInfo.proptypes={tempChecker:React.PropTypes.object.isRequired,zones:React.PropTypes.object.isRequired},TempCheckerInfo.prototype.render=function(){return React.createElement("div",{className:this.props.className},React.createElement("div",{className:ClassNames("tempchecker-info panel panel-default")},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"Temperature Checker")),React.createElement("div",{className:"panel-body"},this.renderContent())))},TempCheckerInfo.prototype.renderContent=function(){var elements=[];return elements}},311:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),defaultState={editing:!1,reason:null,length:5,value:"on"},OverrideInfo=function(props,context){React.Component.call(this,props,context),this.state=defaultState,this._onDelete=this._onDelete.bind(this),this._onUpdate=this._onUpdate.bind(this),this._onCreate=this._onCreate.bind(this),this._onChange=this._onChange.bind(this),this._onSubmit=this._onSubmit.bind(this),this._onCancel=this._onCancel.bind(this)};OverrideInfo.prototype.constructor=OverrideInfo,inherits(OverrideInfo,React.Component),module.exports=OverrideInfo,OverrideInfo.displayName="OverrideInfo",OverrideInfo.proptypes={container:React.PropTypes.object.isRequired,override:React.PropTypes.object.isRequired},OverrideInfo.prototype.render=function(){return React.createElement("div",{className:this.props.className},React.createElement("div",{className:"override-info panel panel-default"},React.createElement("div",{className:"panel-heading"},this.state.editing?null:this.renderButtons(),React.createElement("h4",null,"Override")),React.createElement("div",{className:"panel-body"},this.state.editing?this.renderForm():this.renderValue())))},OverrideInfo.prototype.renderButtons=function(){var elements=[];return null!==this.props.override.get("value")?(elements.push(React.createElement("button",{key:"update",type:"button",onClick:this._onUpdate,className:"btn btn-warning"},"Update")),elements.push(React.createElement("button",{key:"delete",type:"button",onClick:this._onDelete,className:"btn btn-danger"},"Delete"))):elements.push(React.createElement("button",{key:"create",type:"button",onClick:this._onCreate,className:"btn btn-success"},"Create")),React.createElement("div",{className:"btn-group override-buttons"},elements)},OverrideInfo.prototype.renderValue=function(){if(null===this.props.override.get("value"))return React.createElement("div",null,"No Override");var value=this.props.override.get("value");return[React.createElement("div",{key:"reason"},"Reason: '",this.props.override.get("reason"),"'"),React.createElement("div",{key:"value"},"Value: ",React.createElement("em",{className:value?"value-on":"value-off"},value?"On":"Off")),React.createElement("div",{key:"time"})]},OverrideInfo.prototype.renderForm=function(){return React.createElement("form",{className:"override-form",onSubmit:this._onSubmit},React.createElement("div",{className:"form-group"},React.createElement("input",{name:"reason",type:"text",onChange:this._onChange,value:this.state.reason,className:"form-control",required:!0,placeholder:"Reason for the override"})),React.createElement("div",{className:"form-group half"},React.createElement("select",{name:"value",value:this.state.value,className:"form-control",onChange:this._onChange},React.createElement("option",{value:"on"},"On"),React.createElement("option",{value:"off"},"Off"))),React.createElement("div",{className:"form-group half"},React.createElement("input",{name:"length",type:"number",min:"1",max:"360",value:this.state.length,className:"form-control",onChange:this._onChange,required:!0})),React.createElement("div",{className:"btn-group"},React.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),React.createElement("button",{type:"reset",onClick:this._onCancel,className:"btn btn-default"},"Cancel")))},OverrideInfo.prototype._onDelete=function(){this.props.container.push(this.props.container.actions.Override.remove)},OverrideInfo.prototype._onUpdate=function(){this.setState({editing:!0})},OverrideInfo.prototype._onCreate=function(){this.setState({editing:!0})},OverrideInfo.prototype._onSubmit=function(event){event.preventDefault();var values={reason:this.state.reason,value:"on"===this.state.value,length:this.state.length};this.props.container.push(this.props.container.actions.Override.create,[values]),this.setState(defaultState)},OverrideInfo.prototype._onCancel=function(event){event.preventDefault(),this.setState(defaultState)},OverrideInfo.prototype._onChange=function(event){if(this.state.editing){var update={};update[event.target.name]=event.target.value,this.setState(update)}}},312:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ClassNames=__webpack_require__(219),HighChart=__webpack_require__(313),chartOptions={chart:{type:"areaspline"},title:{text:"Average fruit consumption during one week"},legend:{layout:"vertical",align:"left",verticalAlign:"top",x:150,y:100,floating:!0,borderWidth:1,backgroundColor:"#FFFFFF"},xAxis:{categories:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],plotBands:[{from:4.5,to:6.5,color:"rgba(68, 170, 213, .2)"}]},yAxis:{title:{text:"Fruit units"}},tooltip:{shared:!0,valueSuffix:" units"},credits:{enabled:!1},plotOptions:{areaspline:{fillOpacity:.5}},series:[{name:"John",data:[3,4,3,5,4,10,12]},{name:"Jane",data:[1,3,4,3,3,5,4]}]},ZonesHistory=function(props,context){React.Component.call(this,props,context),this.state={}};ZonesHistory.prototype.constructor=ZonesHistory,inherits(ZonesHistory,React.Component),module.exports=ZonesHistory,ZonesHistory.displayName="ZonesHistory",ZonesHistory.proptypes={tempChecker:React.PropTypes.object.isRequired,zones:React.PropTypes.object.isRequired,fetchZonesValues:React.PropTypes.func.isRequired},ZonesHistory.prototype.render=function(){var options=chartOptions;return React.createElement("div",{className:this.props.className},React.createElement("div",{className:ClassNames("zones-history panel panel-default")},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"Zones History")),React.createElement("div",{className:"panel-body"},React.createElement(HighChart,{options:options}))))}},313:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),Highcharts=__webpack_require__(314),Hash=__webpack_require__(315),assign=__webpack_require__(178),HighChart=function(props,context){React.Component.call(this,props,context),this.state={}};HighChart.prototype.constructor=HighChart,inherits(HighChart,React.Component),module.exports=HighChart,HighChart.displayName="HighChart",HighChart.proptypes={options:React.PropTypes.object},HighChart.prototype.getChart=function(){return this.chart},HighChart.prototype.addPoint=function(seriesId,point){return this.chart.get(seriesId).addPoint(point)},HighChart.prototype.addSeries=function(series){this.chart.addSeries(series)},HighChart.prototype.shouldComponentUpdate=function(nextProps){return Hash(this.props.options)!==Hash(nextProps.options)},HighChart.prototype.componentDidMount=function(){var chartConfig=assign({},this.props.options.chart,{renderTo:this.refs.canvas}),config=assign({},this.props.options,{chart:chartConfig});this.renderChart(config)},HighChart.prototype.componentWillUnmount=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},HighChart.prototype.componentDidUpdate=function(){var chartConfig=assign({},this.props.options.chart,{renderTo:this.refs.canvas}),config=assign({},this.props.options,{chart:chartConfig});this.renderChart(config)},HighChart.prototype.render=function(){return React.createElement("div",{className:this.props.className},React.createElement("div",{ref:"canvas",className:"serial-chart"}))},HighChart.prototype.renderChart=function(config){this.chart&&this.chart.destroy(),this.chart=new Highcharts.Chart(config)}},336:function(module,exports,__webpack_require__){module.exports=function(path){return{path:path,component:__webpack_require__(337),indexRoute:{component:__webpack_require__(338)},childRoutes:[{path:":id",component:__webpack_require__(339)}]}}},337:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),SensorsPage=function(props,context){React.Component.call(this,props,context)};SensorsPage.prototype.constructor=SensorsPage,inherits(SensorsPage,React.Component),module.exports=SensorsPage,SensorsPage.displayName="SensorsPage",SensorsPage.proptypes={container:React.PropTypes.object.isRequired},SensorsPage.prototype.render=function(){return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"SensorsPage")),React.createElement("div",{className:"sensors-page panel-body"},this.props.children))}},338:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),SensorsListPage=function(props,context){React.Component.call(this,props,context)};SensorsListPage.prototype.constructor=SensorsListPage,inherits(SensorsListPage,React.Component),module.exports=SensorsListPage,SensorsListPage.displayName="SensorsListPage",SensorsListPage.proptypes={container:React.PropTypes.object.isRequired},SensorsListPage.prototype.render=function(){return React.createElement("span",null,"SensorsList")}},339:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),SensorDetailsPage=function(props,context){React.Component.call(this,props,context)};SensorDetailsPage.prototype.constructor=SensorDetailsPage,inherits(SensorDetailsPage,React.Component),module.exports=SensorDetailsPage,SensorDetailsPage.displayName="SensorDetailsPage",SensorDetailsPage.proptypes={container:React.PropTypes.object.isRequired},SensorDetailsPage.prototype.render=function(){return React.createElement("span",null,"SensorDetailsPage")}},340:function(module,exports,__webpack_require__){module.exports=function(path){return{path:path,component:__webpack_require__(341),childRoutes:[]}}},341:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),SchedulingPage=function(props,context){React.Component.call(this,props,context)};SchedulingPage.prototype.constructor=SchedulingPage,inherits(SchedulingPage,React.Component),module.exports=SchedulingPage,SchedulingPage.displayName="SchedulingPage",SchedulingPage.proptypes={container:React.PropTypes.object.isRequired},SchedulingPage.prototype.render=function(){return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"Scheduling")),React.createElement("div",{className:"scheduling-page panel-body"},this.props.children))}},342:function(module,exports,__webpack_require__){module.exports=function(path){return{path:path,component:__webpack_require__(343),indexRoute:{component:__webpack_require__(344)},childRoutes:[{path:":id",component:__webpack_require__(345)}]}}},343:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ZonesPage=function(props,context){React.Component.call(this,props,context)};ZonesPage.prototype.constructor=ZonesPage,inherits(ZonesPage,React.Component),module.exports=ZonesPage,ZonesPage.displayName="ZonesPage",ZonesPage.proptypes={container:React.PropTypes.object.isRequired},ZonesPage.prototype.render=function(){return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h4",null,"ZonesPage")),React.createElement("div",{className:"zones-page panel-body"},this.props.children))}},344:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ZonesListPage=function(props,context){React.Component.call(this,props,context)};ZonesListPage.prototype.constructor=ZonesListPage,inherits(ZonesListPage,React.Component),module.exports=ZonesListPage,ZonesListPage.displayName="ZonesListPage",ZonesListPage.proptypes={container:React.PropTypes.object.isRequired},ZonesListPage.prototype.render=function(){return React.createElement("span",null,"ZonesList")}},345:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),ZoneDetailsPage=function(props,context){React.Component.call(this,props,context)};ZoneDetailsPage.prototype.constructor=ZoneDetailsPage,inherits(ZoneDetailsPage,React.Component),module.exports=ZoneDetailsPage,ZoneDetailsPage.displayName="ZoneDetailsPage",ZoneDetailsPage.proptypes={container:React.PropTypes.object.isRequired},ZoneDetailsPage.prototype.render=function(){return React.createElement("span",null,"Zone")}},346:function(module,exports,__webpack_require__){var inherits=__webpack_require__(214).inherits,React=__webpack_require__(2),AppContext=function(props,context){React.Component.call(this,props,context)};AppContext.prototype.constructor=AppContext,inherits(AppContext,React.Component),module.exports=AppContext,AppContext.proptypes={container:React.PropTypes.object.isRequired,api:React.PropTypes.object.isRequired},AppContext.childContextTypes={container:React.PropTypes.object.isRequired,api:React.PropTypes.object},AppContext.prototype.getChildContext=function(){return{container:this.props.container,api:this.props.api}},AppContext.prototype.render=function(){return this.props.children}},347:function(module,exports,__webpack_require__){function initializer(){return!0}var Fluxerino=__webpack_require__(348),stores=__webpack_require__(357),actions=__webpack_require__(360),Container=function(context){Fluxerino.Container.call(this,stores,context),this.actions=actions};Container.prototype=Object.create(Fluxerino.Container.prototype),Container.prototype.constructor=Container,Container.prototype.init=function(next){this.push(initializer,[],next)},module.exports=Container,initializer.actionType="LifeCycle.Init"},357:function(module,exports,__webpack_require__){module.exports={Override:__webpack_require__(358),Plans:__webpack_require__(372),Root:__webpack_require__(373),Sensors:__webpack_require__(374),Settings:__webpack_require__(375),Schedules:__webpack_require__(376),Switcher:__webpack_require__(377),TempChecker:__webpack_require__(378),Zones:__webpack_require__(379)}},358:function(module,exports,__webpack_require__){function OverridesStore(type,payload,state){switch("undefined"==typeof state&&(state=getDefaultState()),type){case OverrideActions.load.actionType:case OverrideActions.update.actionType:case OverrideActions.create.actionType:case RootActions.loadDashboard.actionType:state=update(payload.override,state);break;case OverrideActions.remove.actionType:state=remove(payload.override,state)}return state}function getDefaultState(){return Map({reason:null,value:null,length:null,created:null,loading:!0})}function update(override,state){return override?state=override.loading?state.merge(override):Map(override):state}function remove(override,state){return override?state=override.loading?getDefaultState():Map(override):state}var Map=__webpack_require__(359).Map,OverrideActions=__webpack_require__(360).Override,RootActions=__webpack_require__(360).Root;module.exports=OverridesStore},360:function(module,exports,__webpack_require__){var tagActions=__webpack_require__(348).Utils.tagActions;module.exports=tagActions({Override:__webpack_require__(361),Plans:__webpack_require__(362),Root:__webpack_require__(363),Sensors:__webpack_require__(364),SensorsValues:__webpack_require__(365),Settings:__webpack_require__(366),Schedules:__webpack_require__(367),Switcher:__webpack_require__(368),TempChecker:__webpack_require__(369),Zones:__webpack_require__(370),ZonesTemps:__webpack_require__(371)})},361:function(module,exports,__webpack_require__){function onOverrideResponse(result){return{override:result.override}}var assign=__webpack_require__(178);module.exports={load:function(){return this.api.get("override/").then(onOverrideResponse)},create:function(override){return[{override:assign({loading:!0},override)},this.api.post("override/",override).then(onOverrideResponse)]},update:function(override){return[{override:assign({loading:!0},override)},this.api.put("override/",override).then(onOverrideResponse)]},remove:function(){return[{override:{loading:!0,deleting:!0}},this.api.del("override/").then(onOverrideResponse)]}}},362:function(module,exports,__webpack_require__){function generateKey(){return"loading_"+(Math.random()*IntSize).toString(16)}function onPlansResponse(result){return{plans:result.plans}}var assign=__webpack_require__(178);module.exports={load:function(){return this.api.get("plans/").then(onPlansResponse)},create:function(plan){return[{plans:[assign({loading:!0,id:generateKey()},plan)]},this.api.post("plans/",plan).then(onPlansResponse)]},update:function(plan){return[{plans:[assign({loading:!0},plan)]},this.api.put("plans/"+plan.id+"/",plan).then(onPlansResponse)]},remove:function(planId){return[{deletingPlans:[planId]},this.api.del("plans/"+planId+"/").then(function(){return{deletedPlans:[planId]}})]}};var IntSize=Math.pow(2,32)},363:function(module,exports){module.exports={loadDashboard:function(){return[{dashboard:{loading:!0}},this.api.get("dashboard/").then(function(result){return{dashboard:{time:Date.now()},override:result.override,switcher:result.switcher,tempChecker:result.tempChecker,zones:result.zones}})]}}},364:function(module,exports){module.exports={load:function(){return this.api.get("sensors/").then(function(response){return{sensors:response.sensors}})}}},365:function(module,exports,__webpack_require__){function getSensorKey(sensorValue){return sensorValue.sensorId}function groupValues(values,getKey,buildBundle){var heap=values.reduce(function(heap,value){var key=getKey(value);return heap.hasOwnProperty(key)?heap[key].push(value):heap[key]=[value],heap},{});return Object.keys(heap).map(function(key){return buildBundle(key,heap[key])})}var Hash=__webpack_require__(315);module.exports={load:function(fromTs,toTs,zones){var requestMeta={time:Date.now(),hash:Hash.sha1({to:toTs,from:fromTs,zones:zones})};return zones&&!Array.isArray(zones)&&(zones=[zones]),this.api.get("sensorsvalues/",{to:toTs,from:fromTs,zones:zones?zones.join(";"):void 0}).then(function(result){return{sensorsValues:groupValues(result.sensorsValues,getSensorKey,function(key,values){return{zoneId:key,values:values,meta:requestMeta}})}})}}},366:function(module,exports,__webpack_require__){function onSettingsResponse(result){return{settings:result.settings}}var assign=__webpack_require__(178);module.exports={load:function(){return this.api.get("setting/").then(onSettingsResponse)},update:function(setting){return[{settings:[assign({loading:!0},setting)]},this.api.put("settings/"+setting.key+"/",setting.value).then(onSettingsResponse)]},remove:function(settingId){return[{deletingSettings:[settingId]},this.api.del("settings/"+settingId+"/").then(function(){return{deletedSettings:[settingId]}})]}}},367:function(module,exports,__webpack_require__){function generateKey(){return"loading_"+(Math.random()*IntSize).toString(16)}function onSchedulesResponse(result){return{schedules:result.schedules}}var assign=__webpack_require__(178);module.exports={load:function(){return this.api.get("schedules/").then(onSchedulesResponse)},create:function(schedule){return[{schedules:[assign({loading:!0,id:generateKey()},schedule)]},this.api.post("schedules/",schedule).then(onSchedulesResponse)]},update:function(schedule){return[{schedules:[assign({loading:!0},schedule)]},this.api.put("schedules/"+schedule.id+"/",schedule).then(onSchedulesResponse)];
},remove:function(scheduleId){return[{deletingSchedules:[scheduleId]},this.api.del("schedules/"+scheduleId+"/").then(function(){return{deletedSchedules:[scheduleId]}})]}};var IntSize=Math.pow(2,32)},368:function(module,exports){module.exports={load:function(){return this.api.get("switcher/").then(function(response){return{switcher:response.switcher}})}}},369:function(module,exports){module.exports={load:function(){return this.api.get("tempchecker/").then(function(response){return{tempChecker:response.tempChecker}})}}},370:function(module,exports,__webpack_require__){function generateKey(){return"loading_"+(Math.random()*IntSize).toString(16)}function onZonesResponse(result){return{zones:result.zones}}var assign=__webpack_require__(178);module.exports={load:function(){return this.api.get("zones/").then(onZonesResponse)},create:function(zone){return[{zones:[assign({loading:!0,id:generateKey()},zone)]},this.api.post("zones/",zone).then(onZonesResponse)]},update:function(zone){return[{zones:[assign({loading:!0},zone)]},this.api.put("zones/"+zone.id+"/",zone).then(onZonesResponse)]},remove:function(zoneId){return[{deletingZones:[zoneId]},this.api.del("zones/"+zoneId+"/").then(function(){return{deletedZones:[zoneId]}})]}};var IntSize=Math.pow(2,32)},371:function(module,exports,__webpack_require__){function getZoneTempKey(zoneTemp){return zoneTemp.zoneId}function groupValues(values,getKey,buildBundle){var heap=values.reduce(function(heap,value){var key=getKey(value);return heap.hasOwnProperty(key)?heap[key].push(value):heap[key]=[value],heap},{});return Object.keys(heap).map(function(key){return buildBundle(key,heap[key])})}var Hash=__webpack_require__(315);module.exports={load:function(fromTs,toTs,zones){var requestMeta={time:Date.now(),hash:Hash.sha1({to:toTs,from:fromTs,zones:zones})};return zones&&!Array.isArray(zones)&&(zones=[zones]),this.api.get("zonestemps/",{to:toTs,from:fromTs,zones:zones?zones.join(";"):void 0}).then(function(result){return{zonesTemps:groupValues(result.zonesTemps,getZoneTempKey,function(key,values){return{zoneId:key,values:values,meta:requestMeta}})}})}}},372:function(module,exports,__webpack_require__){function PlansStore(type,payload,state){switch(state||(state=getDefaultState()),type){case PlansActions.load.actionType:state=update(payload.plans,getDefaultState());break;case PlansActions.update.actionType:case PlansActions.create.actionType:state=update(payload.plans,state);break;case PlansActions.remove.actionType:state=remove(payload.deletedPlans,state)}return state}function getDefaultState(){return Map()}function createPlan(initialData){return Map(initialData)}function update(plans,state){return plans&&plans.forEach(function(plan){var newPlan;newPlan=state.has(plan.id)?state.get(plan.id).merge(Map(plan)):createPlan(plan),state=state.set(newPlan.get("id"),newPlan)}),state}function remove(plans,state){return plans&&plans.forEach(function(planId){state=state["delete"](planId)}),state}var Map=__webpack_require__(359).Map,PlansActions=__webpack_require__(360).Plans;module.exports=PlansStore},373:function(module,exports,__webpack_require__){function SwitcherStore(type,payload,state){switch(state||(state=getDefaultState()),type){case RootActions.loadDashboard.actionType:state=loadDashboard(payload.dashboard,state)}return state}function getDefaultState(){return Map({dashboard:Map()})}function loadDashboard(dashboard,state){return state.set("dashboard",Map(dashboard))}var Map=__webpack_require__(359).Map,RootActions=__webpack_require__(360).Root;module.exports=SwitcherStore},374:function(module,exports,__webpack_require__){function SensorsStore(type,payload,state){switch(state||(state=getDefaultState()),type){case SensorsActions.load.actionType:state=update(payload.sensors,getDefaultState())}return state}function getDefaultState(){return Map()}function createSensor(initialData){return Map(initialData)}function update(sensors,state){return sensors.forEach(function(sensor){var newSensor=createSensor(sensor);state=state.set(newSensor.get("id"),newSensor)}),state}var Map=__webpack_require__(359).Map,SensorsActions=__webpack_require__(360).Sensors;module.exports=SensorsStore},375:function(module,exports,__webpack_require__){function SettingsStore(type,payload,state){switch(state||(state=getDefaultState()),type){case SettingsActions.load.actionType:state=update(payload.settings,getDefaultState());break;case SettingsActions.update.actionType:state=update(payload.settings,state);break;case SettingsActions.remove.actionType:state=remove(payload.deletedSettings,state)}return state}function getDefaultState(){return Map()}function createSetting(initialData){return Map(initialData)}function update(settings,state){return settings&&settings.forEach(function(setting){var newSetting=createSetting(setting);state=state.set(newSetting.get("key"),newSetting)}),state}function remove(settings,state){return settings&&settings.forEach(function(settingId){state=state["delete"](settingId)}),state}var Map=__webpack_require__(359).Map,SettingsActions=__webpack_require__(360).Settings;module.exports=SettingsStore},376:function(module,exports,__webpack_require__){function SchedulesStore(type,payload,state){switch(state||(state=getDefaultState()),type){case SchedulesActions.load.actionType:state=update(payload.schedules,getDefaultState());break;case SchedulesActions.update.actionType:case SchedulesActions.create.actionType:state=update(payload.schedules,state);break;case SchedulesActions.remove.actionType:state=remove(payload.deletedSchedules,state)}return state}function getDefaultState(){return Map()}function createSchedule(initialData){return Map(initialData)}function update(schedules,state){return schedules&&schedules.forEach(function(schedule){var newSchedule;newSchedule=state.has(schedule.id)?state.get(schedule.id).merge(Map(schedule)):createSchedule(schedule),state=state.set(newSchedule.get("id"),newSchedule)}),state}function remove(schedules,state){return schedules&&schedules.forEach(function(scheduleId){state=state["delete"](scheduleId)}),state}var Map=__webpack_require__(359).Map,SchedulesActions=__webpack_require__(360).Schedules;module.exports=SchedulesStore},377:function(module,exports,__webpack_require__){function SwitchersStore(type,payload,state){switch("undefined"==typeof state&&(state=getDefaultState()),type){case SwitcherActions.load.actionType:case RootActions.loadDashboard.actionType:state=update(payload.switcher,state)}return state}function getDefaultState(){return Map({})}function update(switcher,state){return switcher?state=switcher.loading?state.merge(switcher):Map(switcher):state}var Map=__webpack_require__(359).Map,SwitcherActions=__webpack_require__(360).Switcher,RootActions=__webpack_require__(360).Root;module.exports=SwitchersStore},378:function(module,exports,__webpack_require__){function TempCheckersStore(type,payload,state){switch("undefined"==typeof state&&(state=getDefaultState()),type){case TempCheckerActions.load.actionType:case RootActions.loadDashboard.actionType:state=update(payload.tempChecker,state)}return state}function getDefaultState(){return Map({})}function update(tempChecker,state){return tempChecker?state=tempChecker.loading?state.merge(tempChecker):Map(tempChecker):state}var Map=__webpack_require__(359).Map,TempCheckerActions=__webpack_require__(360).TempChecker,RootActions=__webpack_require__(360).Root;module.exports=TempCheckersStore},379:function(module,exports,__webpack_require__){function ZonesStore(type,payload,state){switch(state||(state=getDefaultState()),type){case ZonesActions.load.actionType:case RootActions.loadDashboard.actionType:state=update(payload.zones,getDefaultState());break;case ZonesActions.update.actionType:case ZonesActions.create.actionType:state=update(payload.zones,state);break;case ZonesActions.remove.actionType:state=remove(payload.deletedZones,state)}return state}function getDefaultState(){return Map()}function createZone(initialData){return Map(initialData)}function update(zones,state){return zones&&zones.forEach(function(zone){var newZone;newZone=state.has(zone.id)?state.get(zone.id).merge(Map(zone)):createZone(zone),state=state.set(newZone.get("id"),newZone)}),state}function remove(zones,state){return zones&&zones.forEach(function(zoneId){state=state["delete"](zoneId)}),state}var Map=__webpack_require__(359).Map,ZonesActions=__webpack_require__(360).Zones,RootActions=__webpack_require__(360).Root;module.exports=ZonesStore},380:function(module,exports,__webpack_require__){var SuperAgent=__webpack_require__(381),Promise=__webpack_require__(384),ServerApi=function(config){this.baseUri=config.base,this.requestAsync=Promise.promisify(this.request,{context:this})};ServerApi.prototype.constructor=ServerApi,module.exports=ServerApi,ServerApi.prototype.getPath=function(sub){return this.baseUri+sub},ServerApi.prototype.get=function(path,query){var req=SuperAgent.get(this.getPath(path)).query(query);return this.requestAsync(req)},ServerApi.prototype.post=function(path,data){var req=SuperAgent.post(this.getPath(path)).set("Content-Type","application/json").send(data);return this.requestAsync(req)},ServerApi.prototype.put=function(path,data){var req=SuperAgent.put(this.getPath(path)).set("Content-Type","application/json").send(data);return this.requestAsync(req)},ServerApi.prototype.del=function(path){var req=SuperAgent.del(this.getPath(path));return this.requestAsync(req)},ServerApi.prototype.request=function(req,callback){req.set("Accept","application/json").end(function(err,res){return!err&&res.ok?callback(null,res.body):callback(err,null)})}}});
//# sourceMappingURL=app.min.js.map